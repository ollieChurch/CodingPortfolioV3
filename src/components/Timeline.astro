---
interface TimelineEntry {
  year: string;
  title: string;
  description: string;
}

interface Props {
  entries: TimelineEntry[];
}

const { entries } = Astro.props;
---

<!-- Mobile: single-sided timeline -->
<div class="md:hidden relative ml-3 border-l-2 border-[var(--color-purple)]">
  {entries.map((entry) => (
    <div class="relative mb-2 pl-4 last:mb-0">
      <span class="absolute -left-[5px] top-2 h-2 w-2 rounded-full border-2 border-[var(--color-purple)] bg-[var(--color-bg-dark)] shadow-sm shadow-[var(--color-purple)]/30" />
      <div class="rounded border border-[var(--color-bg-dark-card)] bg-[var(--color-bg-dark-surface)] px-3 py-2 transition-transform hover:scale-[1.03]">
        <span class="text-xs font-semibold text-[var(--color-purple-light)]">{entry.year}</span>
        <span class="ml-2 text-sm text-gray-200">{entry.title}</span>
        <p class="text-xs text-gray-400">{entry.description}</p>
      </div>
    </div>
  ))}
</div>

<!-- Desktop: two-column timeline -->
<div class="hidden md:grid relative" style="grid-template-columns: 1fr auto 1fr; gap: 0 12px;">
  {/* Centre line */}
  <div class="absolute left-1/2 top-0 bottom-0 w-0.5 -translate-x-1/2 bg-[var(--color-purple)]" />

  {/* Left column */}
  <div class="flex flex-col gap-5 pt-0">
    {entries.filter((_, i) => i % 2 === 0).map((entry) => (
      <div class="relative rounded border border-[var(--color-bg-dark-card)] bg-[var(--color-bg-dark-surface)] px-3 py-2 transition-transform hover:scale-[1.03]">
        <span class="text-xs font-semibold text-[var(--color-purple-light)]">{entry.year}</span>
        <span class="ml-2 text-sm font-medium text-gray-200">{entry.title}</span>
        <p class="text-xs text-gray-400">{entry.description}</p>
        {/* Connector + dot */}
        <span class="absolute right-[-14px] top-3 w-[12px] h-[2px] border-t-2 border-dotted border-[var(--color-purple)]/50" />
        <span class="absolute -right-[20px] top-[9px] h-2 w-2 rounded-full border-2 border-[var(--color-purple)] bg-[var(--color-bg-dark)] shadow-sm shadow-[var(--color-purple)]/30 z-10" />
      </div>
    ))}
  </div>

  {/* Spacer for centre line */}
  <div class="w-0.5" />

  {/* Right column */}
  <div class="flex flex-col gap-5 pt-10">
    {entries.filter((_, i) => i % 2 !== 0).map((entry) => (
      <div class="relative rounded border border-[var(--color-bg-dark-card)] bg-[var(--color-bg-dark-surface)] px-3 py-2 transition-transform hover:scale-[1.03]">
        <span class="text-xs font-semibold text-[var(--color-purple-light)]">{entry.year}</span>
        <span class="ml-2 text-sm font-medium text-gray-200">{entry.title}</span>
        <p class="text-xs text-gray-400">{entry.description}</p>
        {/* Connector + dot */}
        <span class="absolute left-[-14px] top-3 w-[12px] h-[2px] border-t-2 border-dotted border-[var(--color-purple)]/50" />
        <span class="absolute -left-[20px] top-[9px] h-2 w-2 rounded-full border-2 border-[var(--color-purple)] bg-[var(--color-bg-dark)] shadow-sm shadow-[var(--color-purple)]/30 z-10" />
      </div>
    ))}
  </div>
</div>
